# SÂ² Worker Credentials

This directory contains MCP bridge credentials for the 8 worker agents.

## Credential Format

Each worker has a credentials file: `s2-worker-{1-8}-credentials.json`

Example format:

```json
{
  "conversation_id": "conv_abc123def456",
  "worker_id": "1",
  "worker_role": "backend",
  "coordinator_token": "c45096ae9444fa376bb22baa0049127307c68485dac746069b621dcee933a65a",
  "worker_token": "20283f213bbfb11d6ccb9ebe66d52edae5a1a1ad51c9d109cdc356810a6d2504",
  "created_at": "2025-11-13 15:10:15",
  "expires_at": "2025-11-13T18:10:15.096047"
}
```

## Worker Roles

| Worker ID | Role | Machine |
|-----------|------|---------|
| 1 | backend | Cloud Machine 2 |
| 2 | frontend | Cloud Machine 3 |
| 3 | tests | Cloud Machine 4 |
| 4 | docs | Cloud Machine 5 |
| 5 | deploy | Cloud Machine 6 |
| 6 | review | Cloud Machine 7 |
| 7 | wsl-cli | Your WSL (Local) |
| 8 | cloud-codex | Cloud Machine 8 |

## Credential Generation

Credentials are generated by the **orchestrator** using the MCP bridge `create_conversation` tool.

See: `/home/user/infrafabric/scripts/s2-deployment/README.md` for setup instructions.

## Security Notes

- Tokens are HMAC-SHA256 hashes (64 characters)
- Tokens expire after 3 hours (TTL enforced by bridge)
- Do NOT commit tokens to public repositories
- Rotate tokens daily in production

## Git Workflow

1. **Orchestrator** creates conversations and saves credentials to this directory
2. **Orchestrator** commits credentials to git and pushes
3. **Workers** pull credentials from git via credential-sync-daemon
4. **Workers** extract their credentials based on worker_id
5. **Workers** start keep-alive daemon with extracted credentials

## Template

See `s2-worker-template-credentials.json` for the expected JSON structure.
